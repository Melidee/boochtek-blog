<!DOCTYPE html>

<html class="no-js" lang="en-US">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<link href="http://gmpg.org/xfn/11" rel="profile"/>
<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Programming – Page 2 – BoochTek, LLC</title>
<link href="//fonts.googleapis.com" rel="dns-prefetch"/>
<link href="//s.w.org" rel="dns-prefetch"/>
<link href="../../../../feed" rel="alternate" title="BoochTek, LLC » Feed" type="application/rss+xml">
<link href="../../../../comments/feed" rel="alternate" title="BoochTek, LLC » Comments Feed" type="application/rss+xml"/>
<link href="../../../../category/programming/feed" rel="alternate" title="BoochTek, LLC » Programming Category Feed" type="application/rss+xml"/>
<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/blog.boochtek.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.2"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link href="https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&amp;subset=latin%2Clatin-ext" id="twentysixteen-fonts-css" media="all" rel="stylesheet" type="text/css"/>
<link href="../../../../wp-content/themes/twentysixteen/genericons/genericons.css?ver=3.4.1" id="genericons-css" media="all" rel="stylesheet" type="text/css"/>
<link href="../../../../wp-content/themes/twentysixteen/style.css?ver=4.7.2" id="twentysixteen-style-css" media="all" rel="stylesheet" type="text/css"/>
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='http://blog.boochtek.com/wp-content/themes/twentysixteen/css/ie.css?ver=20150825' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='http://blog.boochtek.com/wp-content/themes/twentysixteen/css/ie8.css?ver=20150825' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='http://blog.boochtek.com/wp-content/themes/twentysixteen/css/ie7.css?ver=20150825' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<script type='text/javascript' src='http://blog.boochtek.com/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<script src="../../../../wp-includes/js/jquery/jquery.js?ver=1.12.4" type="text/javascript"></script>
<script src="../../../../wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1" type="text/javascript"></script>
<link href="../../../../wp-json/" rel="https://api.w.org/"/>
<link href="../../../../xmlrpc.php?rsd" rel="EditURI" title="RSD" type="application/rsd+xml"/>
<link href="../../../../wp-includes/wlwmanifest.xml" rel="wlwmanifest" type="application/wlwmanifest+xml"/>
<meta content="WordPress 4.7.2" name="generator"/>
</link></head>
<body class="archive paged category category-programming category-8 paged-2 category-paged-2 hfeed">
<div class="site" id="page">
<div class="site-inner">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<header class="site-header" id="masthead" role="banner">
<div class="site-header-main">
<div class="site-branding">
<p class="site-title"><a href="../../../" rel="home">BoochTek, LLC</a></p>
<p class="site-description">Web Development, Ruby on Rails, Open Source</p>
</div><!-- .site-branding -->
</div><!-- .site-header-main -->
</header><!-- .site-header -->
<div class="site-content" id="content">
<div class="content-area" id="primary">
<main class="site-main" id="main" role="main">
<header class="page-header">
<h1 class="page-title">Category: Programming</h1> </header><!-- .page-header -->
<article class="post-129 post type-post status-publish format-standard hentry category-shell category-sysadmin" id="post-129">
<header class="entry-header">
<h2 class="entry-title"><a href="../../../2014/03/03/yak-shaving-cursor-keys" rel="bookmark">Yak Shaving #1: Cursor Keys</a></h2> </header><!-- .entry-header -->
<div class="entry-content">
<p>I recently decided to start using Emacs again. I used it extensively from the early 1990s until the early 2000s. I pretty much stopped using it when I had a sysadmin job with no Emacs on the servers, and no ability to install it. With the rising popularity of tmux and tmate for remote pairing, and my dislike for vim’s modes, I decided to try going back to Emacs in the terminal.</p>
<p>One thing I <strong>really</strong> want in a text editor is good cursor key support. Shifted cursor keys<br/>
should select text, and Control+left and right should move by words. (<a href="https://developer.apple.com/library/mac/documentation/UserExperience/Conceptual/AppleHIGuidelines/KeyboardShortcuts/KeyboardShortcuts.html">Apple HIG</a> says to use Option+left and right to move by words; most apps on Mac OS X seem to support both.) Things have worked this way on almost every text editor on every OS I’ve used — Amiga, DOS, Windows, NeXT, Mac, Motif, Gnome, KDE. It’s a part of the <a href="https://en.wikipedia.org/wiki/Common_User_Access">CUA</a> standard that’s been in common usage on everything since the mid-1980s.</p>
<p>Enabling cursor keys in Emacs was pretty easy. I’ve decided to use <a href="https://github.com/bbatsov/prelude#readme">Prelude</a> to make getting started with Emacs easy. Emacs comes with the cursor keys enabled, but Prelude disables them. Undoing Prelude’s change is pretty easy:</p>
<pre>(setq prelude-guru nil)</pre>
<p>Trying to make shifted cursor keys work is where the trouble began. They work in the GUI version of Emacs, but not from the terminal. It turns out that the Mac Terminal doesn’t distinguish between cursor keys and shifted cursor keys in its default configuration. So I had to figure out how to configure key bindings in Terminal.</p>
<p>That’s easy enough — they’re in the preferences. But what should I set them to? This took a lot of research. Terminal emulation and ANSI code sequences are obscure, complex, and inconsistent. I eventually found the info I needed. For starters, Shift+Right, Shift+Left, Shift+Home, and Shift+End are defined in the terminfo. The rest I was able to piece together from various sources around the Internet.</p>
<p>I’m also trying to <a href="https://github.com/boochtek/mac_config">script my Mac configuration</a>. So instead of manually adding all the keybindings in the Terminal preferences pane, I decided to write a script. Mac OS X does a decent job of allowing you to change preferences from the command line. For example, to always show the tab bar:</p>
<pre>defaults write -app Terminal ShowTabBar 1</pre>
<p>Easy enough, except for a couple problems. First, I had to figure out the obscure syntax used in the preferences for key codes. I was able to piece these together with some more Internet research. But the really big problem is that the keyboard bindings are 2 levels deep within a “dictionary” (hash map). And the <code>defaults</code> command doesn’t handle that. There are some obscure utilities that handle nested preferences, but <a href="https://groups.google.com/forum/#!topic/macenterprise/YgJnfqpyKNs">they don’t work well with the preferences caching in Mac OS X 10.9</a> — a problem I ran into while testing.</p>
<p>So now I’m writing a utility in Python that does what the <code>defaults</code> command does, but that will handle nested dictionaries.</p>
<p>There’s a term for this process of having to solve one issue before you can solve another, and the issues get several layers deep. It’s called <em>yak shaving</em>.</p>
<p>Here’s another good example:</p>
<figure class="wp-caption alignnone" id="attachment_143" style="width: 480px"><a href="../../../wp-content/uploads/2014/03/ibaDjk7AeIcvxv.gif"><img alt="Father from Malcolm in the middle having to fix one thing before fixing another, ad infinitum." class="size-full wp-image-143" height="360" src="http://blog.boochtek.com/wp-content/uploads/2014/03/ibaDjk7AeIcvxv.gif" width="480"/></a><figcaption class="wp-caption-text">Yak shaving – home repairs</figcaption></figure>
<p>I’m sure this will be the first of many posts about me yak shaving.</p>
</div><!-- .entry-content -->
<footer class="entry-footer">
<span class="byline"><span class="author vcard"><img alt="" class="avatar avatar-49 photo" height="49" src="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=49&amp;d=blank&amp;r=g" srcset="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=98&amp;d=blank&amp;r=g 2x" width="49"/><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/booch">Craig Buchek</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2014/03/03/yak-shaving-cursor-keys" rel="bookmark"><time class="entry-date published updated" datetime="2014-03-03T22:02:59+00:00">March 3, 2014</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../../category/programming/programming-languages/shell" rel="category tag">Shell</a>, <a href="../../../category/sysadmin" rel="category tag">System Admin</a></span><span class="comments-link"><a href="../../../2014/03/03/yak-shaving-cursor-keys#respond">Leave a comment<span class="screen-reader-text"> on Yak Shaving #1: Cursor Keys</span></a></span> </footer><!-- .entry-footer -->
</article><!-- #post-## -->
<article class="post-104 post type-post status-publish format-standard hentry category-oop category-ruby category-rails" id="post-104">
<header class="entry-header">
<h2 class="entry-title"><a href="../../../2014/02/10/includable-activerecord" rel="bookmark">Includable ActiveRecord</a></h2> </header><!-- .entry-header -->
<div class="entry-content">
<p>I created a Ruby gem recently, called <a href="https://github.com/boochtek/includable-activerecord">includable-activerecord</a>. It’s pretty small, but I thought I might explain why I created it, and discuss its implementation.</p>
<h1>Classical Inheritance</h1>
<p>When you use ActiveRecord, you normally include it in your model like this:</p>
<pre>class User &lt; ActiveRecord::Base
  # ...
end</pre>
<p>Your <code>User</code> class is inheriting from the <code>ActiveRecord::Base</code> class. This is class-based inheritance, also called “classical” inheritance. (That’s “classical” as in “class”, not as a synonym for “traditional”.) Class-based inheritance represents an “is-a” relationship. So we’re saying that a user is an ActiveRecord base. Another way to say this is that <code>User</code> is a subclass of <code>ActiveRecord::Base.<br/>
</code><br/>
There are a few problems with this. First, what is a “base”? The name was chosen because it’s a base class. But just like we don’t give factory classes names like <code>UserFactory</code> (at least not in Ruby), we shouldn’t name base classes <code>Base</code>.</p>
<p>I suppose that we’re trying to say that this is an ActiveRecord model. That sounds fine at first glance — this is our model for users. But what if we also want to say that a user is a person? Ruby doesn’t allow inheriting from multiple classes. Now we have to choose whether to inherit from <code>ActiveRecord::Base</code> or <code>Person</code>. <code>Person</code> makes more sense, because it fills the “is-a” rule better. Class inheritance is intended for a hierarchical “is-a” relationship, such as “a user is a person”, or “a circle is a shape”. But since <code>ActiveRecord::Base</code> is a base class, we <strong>have</strong> to use it as our base class.</p>
<p>We could work around this problem by subclassing <code>Person</code> from <code>ActiveRecord::Base</code> and then subclassing <code>User</code> from <code>Person</code>. That’s fine if <code>Person</code> is also a model that we store in the database. But if that’s not the case, then we have a problem.</p>
<p><span style="color: #000000; font-weight: bold;">Mixins</span></p>
<p>Ruby provides another way of implementing inheritance — mixins. We often don’t think of this as an inheritance model, but it really is. When we include a module, that module gets added to the class’s ancestor chain. We can mix in as many modules as we want.</p>
<p>Mixins indicate more of an “acts like” relationship than an “is-a” relationship. It’s for shared behavior between classes that don’t have a hierarchical relationship. For example, when we mix in the <code>Enumerable</code> module, we’re saying that we want our class to act like other classes that include <code>Enumerable</code>. That sounds more like what we want ActiveRecord to be. We want our user model to behave like other ActiveRecord models, in the way that they can persist to a database.</p>
<p>But ActiveRecord doesn’t support that. Almost all the other Ruby ORMs do; as we’ve shown above, this is for good reasons.</p>
<h1>Implementation</h1>
<p>So I decided to see if I could implement the equivalent of the <code>ActiveRecord::Base</code> class as a module that could be mixed into model classes. I decided to call my mixin module <code>ActiveRecord::Model</code>, because classes that mix it in will behave as ActiveRecord models.</p>
<p>It turns out that <code>ActiveRecord::Base</code> is a pretty complex class. It includes and extends a lot of other modules. Luckily, as of ActiveRecord 4.0, that’s <strong>all</strong> the code it includes.</p>
<p>The module only defines a single class method, <a href="http://www.ruby-doc.org/core-2.0.0/Module.html#method-i-included"><code>included</code></a>. This is one of <a href="http://stackoverflow.com/questions/5127819/is-this-a-comprehensive-list-of-ruby-hook-methods">Ruby’s many hook methods</a>. It gets called when the module in question gets included in another module, and receives that other model as its argument. All we need to have this method do is to <code style="font-style: inherit;">include</code> everything that <code style="font-style: inherit;">ActiveRecord::Base</code> includes, and <code style="font-style: inherit;">extend</code> everything that <code style="font-style: inherit;">ActiveRecord::Base</code> extends. Ruby provides a method that’s defined on all classes, called <code style="font-style: inherit;">included_modules</code>, which we can use to get the list of everything that’s included in <code style="font-style: inherit;">ActiveRecord::Base</code>. Unfortunately, there’s no equivalent list of <code style="font-style: inherit;">extended_modules</code>. But a quick search on Stack Overflow found <a href="http://stackoverflow.com/a/5197277">an implementation of <code>extended_modules</code></a> that we could use.</p>
<p>So with a bit of magic (i.e. hooks and meta-programming), we can get the lists of constituent modules from the <code>ActiveRecord::Base</code> class, and include them in our <code>ActiveRecord::Model</code> module.</p>
<p>So with all that, we can now include the <a href="https://github.com/boochtek/includable-activerecord">includable-activerecord</a> gem and mix it in, with all the advantages that provides:</p>
<pre>class User
  include ActiveRecord::Model
  # ...
end</pre>
<p>It was exciting to be able to make this work. Since I wrote it as a proof of concept, I haven’t written any tests yet. But it seems to be working just fine. The main thing I really need to look into is making sure that plugins that extend <code>ActiveRecord::Base</code> from their own code will still work. I’m pretty sure this will work out of the box, because the <code>ActiveRecord::Model.included</code> doesn’t run until the model class is loaded, and that happens after those plugins have initialized themselves.</p>
</div><!-- .entry-content -->
<footer class="entry-footer">
<span class="byline"><span class="author vcard"><img alt="" class="avatar avatar-49 photo" height="49" src="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=49&amp;d=blank&amp;r=g" srcset="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=98&amp;d=blank&amp;r=g 2x" width="49"/><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/booch">Craig Buchek</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2014/02/10/includable-activerecord" rel="bookmark"><time class="entry-date published" datetime="2014-02-10T12:09:53+00:00">February 10, 2014</time><time class="updated" datetime="2014-02-18T16:28:58+00:00">February 18, 2014</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../../category/programming/oop" rel="category tag">OOP</a>, <a href="../../../category/programming/programming-languages/ruby" rel="category tag">Ruby</a>, <a href="../../../category/webdev/rails" rel="category tag">Ruby on Rails</a></span><span class="comments-link"><a href="../../../2014/02/10/includable-activerecord#respond">Leave a comment<span class="screen-reader-text"> on Includable ActiveRecord</span></a></span> </footer><!-- .entry-footer -->
</article><!-- #post-## -->
<article class="post-93 post type-post status-publish format-standard hentry category-oop category-rails category-tdd" id="post-93">
<header class="entry-header">
<h2 class="entry-title"><a href="../../../2014/01/26/testing-rails-validators" rel="bookmark">Testing Rails Validators</a></h2> </header><!-- .entry-header -->
<div class="entry-content">
<p>It’s challenging to test Rails custom validators.</p>
<p>I recently had to write a validator to require that an entered date is before or after a specified date.</p>
<p>It didn’t seem like writing the validator would be too difficult – I’ve written custom validators before, and date comparisons aren’t all that tricky. But when it came time to write the tests, I ran into several issues. And since I always try to follow TDD / test-first, I was blocked before I even began.</p>
<p>The biggest issue was the <code>ActiveModel::EachValidator#validates_each</code> API. It’s definitely not a well-designed API. You write your validator as a subclass, overriding <code>validates_each</code>. The method takes a model object, the name of the attribute of the model being tested, and the value of that attribute. You can also get the options passed to the custom validator via the <code>options</code> method. To perform a validation, you have to update the model’s <code>errors</code> hash.</p>
<p>The big flaw in the API is that instead of returning a result, you have to update the model. This needlessly couples the model and the validator. And it violates the Single Responsibility Principle — it has to determine validity of the field, and it has to update the <code>errors</code> hash of the model. This is not conducive to testing. Testing this method requires testing that the side-effect has taken place in the collaborator (model), which means it’s not really a unit test any more.</p>
<p>So to make it easier to unit test the validator, I broke the coupling by breaking it into 2 pieces, one for each responsibility. I moved the responsibility for determining validity to a separate method, which I called <code>errors_for</code>. It returns a hash of the errors found. This simplified the <code>validates_each</code> method to simply take the result of <code>errors_for</code> and update the <code>errors</code> hash of the model:</p>
<pre>def validate_each(record, attribute_name, attribute_value)
  record.errors[attribute_name].concat(errors_for(attribute_value, options))
end</pre>
<p>This made it much easier to unit test the <code>errors_for</code> method. This method doesn’t even need to know about the model — only about the value of the attribute we’re trying to validate. We simply pass in the attribute’s value and the options.</p>
<p>So we could write the tests without even pulling in ActiveRecord or any models:</p>
<pre>describe DateValidator do
  let(:validator) { DateValidator.new(attributes: :attribute_name) }
  let(:errors) { validator.errors_for(attribute_value, validation_options) }

  describe 'when attribute value is NOT a valid date' do
    let(:attribute_value) { 'not a valid date' }
    it { errors.must_include 'is not a valid date' }
  end

  describe 'when attribute value IS a valid date' do
    let(:attribute_value) { Date.parse('2013-12-11') }
    it { errors.must_be :empty? }
  end
end</pre>
<p>And the <code>errors_for</code> method looked something like this:</p>
<pre>def errors_for(attribute_value, options)
  unless attribute_value.is_a?(Date)
    return [options.fetch(:message, "is not a valid date")]
  end
  []
end</pre>
<p>Integration testing can also be a bit of a challenge. I recommend following the example from <a href="http://stackoverflow.com/a/17739176">this Stack Overflow answer</a>. Basically, create a minimal model object that contains the field and the validation. Then test that the model behaves like you expect with different values and validations.</p>
</div><!-- .entry-content -->
<footer class="entry-footer">
<span class="byline"><span class="author vcard"><img alt="" class="avatar avatar-49 photo" height="49" src="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=49&amp;d=blank&amp;r=g" srcset="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=98&amp;d=blank&amp;r=g 2x" width="49"/><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/booch">Craig Buchek</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2014/01/26/testing-rails-validators" rel="bookmark"><time class="entry-date published updated" datetime="2014-01-26T23:27:07+00:00">January 26, 2014</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../../category/programming/oop" rel="category tag">OOP</a>, <a href="../../../category/webdev/rails" rel="category tag">Ruby on Rails</a>, <a href="../../../category/agile/tdd" rel="category tag">TDD</a></span><span class="comments-link"><a href="../../../2014/01/26/testing-rails-validators#respond">Leave a comment<span class="screen-reader-text"> on Testing Rails Validators</span></a></span> </footer><!-- .entry-footer -->
</article><!-- #post-## -->
<article class="post-76 post type-post status-publish format-standard hentry category-programming category-python category-ruby" id="post-76">
<header class="entry-header">
<h2 class="entry-title"><a href="../../../2013/02/22/my-thoughts-on-python-vs-ruby" rel="bookmark">My Thoughts on Python vs. Ruby</a></h2> </header><!-- .entry-header -->
<div class="entry-content">
<p>I’ve been using Python at work for the past few months.  I learned Python back in the early 2000s, but never used it for any large projects.  I learned Ruby in late 2005, and it quickly became my language of choice for most cases.</p>
<p>So while I still prefer Ruby, and will likely use Ruby more in the future than Python, I wanted to assess the strengths and weaknesses of Python in relation to Ruby.  Perhaps some of the lessons could be applied when writing Ruby, and it could help to decide when to use each.  Also, I’m interested in programming language design, and wanted to document pros and cons in that light.</p>
<p><span style="color: #000000; font-weight: bold;">Where Python Sucks (As Compared to Ruby)</span></p>
<ul>
<li>Have to explicitly include <strong>self</strong> in <strong>EVERY</strong> method declaration.
<ul>
<li>Including <strong>@classmethod</strong> declarations (although people usually use the name <strong>cls</strong> instead of <strong>self</strong> there).</li>
<li>Except <strong>@staticmethod</strong> declarations.</li>
</ul>
</li>
<li>Have to use <strong>self</strong> everywhere to reference an object’s own attributes.</li>
<li>Inconsistency of things like the <strong>len()</strong> function, when everything else is a method.</li>
<li>Inconsistency of having some built-in classes with lower-case names.
<ul>
<li>And they’re not whole words, so you have to memorize them: <strong>list</strong>, <strong>dict</strong>, <strong>str</strong>, <strong>int</strong>.</li>
<li>Even more bizarre is <strong>dict</strong> vs. <strong>OrderedDict</strong>.</li>
</ul>
</li>
<li>I’m not a fan of <strong>True</strong> and <strong>False</strong> being uppercase.
<ul>
<li>I’m a bit less concerned about <strong>None</strong>, for some reason.</li>
<li>If they’re going to be uppercase, they might as well be all caps, in my opinion.</li>
</ul>
</li>
<li>Inconsistency of camelCase versus snake_case in some modules.</li>
<li>Claims to prefer explicit over implicit, yet does not use <strong>new</strong> to create an object.
<ul>
<li>It is nicely concise, but makes it look too much like a regular function call.</li>
</ul>
</li>
<li>The implementation of lambdas is too limited.
<ul>
<li>Makes using <strong>map</strong> function not very useful.</li>
</ul>
</li>
<li>Class methods are less than ideal to implement.
<ul>
<li>Probably better to use functions within a module instead, in many cases.</li>
</ul>
</li>
<li>Lack of good functional programming tools makes it harder to manipulate lists.
<ul>
<li>Have to often resort to creating an initial list and adding to it in a <strong>for</strong> loop.</li>
</ul>
</li>
<li>I don’t understand why r’regex_string’ doesn’t just create an actual regular expression object.</li>
<li>I miss Ruby’s method-call-or-property-getter syntax.
<ul>
<li>Nice that I can get it by adding <strong>@property</strong> to method definitions, but that’s a bit messy.</li>
</ul>
</li>
<li>I don’t understand why lists don’t have a <strong>join()</strong> method; it seems backwards to call <strong>join</strong> on the string used to connect the list elements.</li>
<li>I miss <strong>unless</strong>; seems like with all the keywords, Python would have added that.</li>
<li>I really miss <strong>||=</strong> to memoize.
<ul>
<li>The distinction between unset variables and variables set to <strong>None</strong> makes it hard.</li>
<li>I also miss <strong>+=</strong>.</li>
</ul>
</li>
<li>I really miss statement modifiers (<strong>if</strong> or <strong>unless</strong> at the end of the statement/expression instead of the beginning).</li>
<li>I miss being able to assign to a compound statement (<strong>x = if True: 1; else: 2</strong>).
<ul>
<li>While Python does allow this simple case, it does not allow more complex cases.</li>
</ul>
</li>
<li>The way modules, files, and classes work, I either have a lot of classes in one file, or have to come up with more module names in order to split classes into different files.</li>
<li>The preference for bare functions within modules over class methods often leads to functions outside of classes, when they’d make more sense more closely associated with the class.</li>
<li>I don’t quite understand the necessity for <strong>pass</strong>.
<ul>
<li>Seems like allowing 0 lines of indented code would suffice instead.</li>
</ul>
</li>
<li>I miss implicit <strong>return</strong>.
<ul>
<li>Explicit <strong>return</strong> looks a bit nicer, but is less concise, and I’ve gotten out of the habit.</li>
</ul>
</li>
<li>Mixins turn out to be more useful than multiple inheritance.</li>
<li>I miss string interpolation.</li>
<li>I really miss <strong>Array#first</strong> and <strong>Array#last</strong>.</li>
<li>I really don’t like that 0 is falsey.
<ul>
<li>I could live with empty lists and dicts being false, but not 0.0 and 0.</li>
</ul>
</li>
<li>Comparing a string to a regular expression seems harder than it should be.</li>
<li>Converting to a Boolean is not as easy a Ruby’s <strong>!!</strong> syntax.
<ul>
<li>OK, <strong>bool(expression)</strong> isn’t so bad, I guess.</li>
</ul>
</li>
</ul>
<h1>Where Python Rocks</h1>
<ul>
<li>Indentation removes the need for <strong>end</strong> everywhere.</li>
<li>Import statements are nice.
<ul>
<li>Can import everything, or just a few things.</li>
</ul>
</li>
<li>Annotations are nice for aspect-oriented modification of methods.
<ul>
<li>Does it make it hard to debug though, like <strong>alias_method_chain</strong> in Ruby?</li>
<li>It’s kind of tricky to write them though, due to doubly-nested function definitions.</li>
</ul>
</li>
<li>List comprehensions are more powerful than <strong>map</strong>.
<ul>
<li>But <strong>map</strong> can be more concise for the most common cases.</li>
</ul>
</li>
<li>Can add arbitrary attributes to any object, class, or module.</li>
<li>The object creation syntax is nicely concise.</li>
<li>Sometimes the ability to add a bare function within a module is nice.</li>
<li>Keyword arguments are nicely done.
<ul>
<li>Ruby’s emulation via hashes without braces is OK, but the corner cases are problematic.</li>
</ul>
</li>
<li>Docstrings as part of the language is nice.</li>
<li>The new <strong>with</strong> keyword looks like a halfway-decent replacement for blocks.
<ul>
<li>Seems like a lot more work that using blocks and <strong>yield</strong> though.</li>
</ul>
</li>
<li>Python 3 drops support for octal literals starting with a 0.
<ul>
<li>Still allows it via a 0o prefix.</li>
</ul>
</li>
<li>No support for all the crazy Perl-inspired globals.</li>
<li>The names <strong>list</strong> and <strong>dictionary</strong> are better than <strong>array</strong> and <strong>hash</strong>.
<ul>
<li>The Ruby names are more about the implementation, especially <strong>hash</strong>.</li>
<li>I’d much prefer the name <strong>map</strong> over <strong>hash</strong>, or even <strong>dictionary</strong>.</li>
<li>The name <strong>list</strong> is only slightly better than <strong>array</strong>.</li>
</ul>
</li>
<li>List and string slicing is quite nice.
<ul>
<li>I do wish that the syntax was “..” instead of “:” though.</li>
<li>Slice assignment is even cooler.</li>
</ul>
</li>
<li>I prefer the Python <strong>dict</strong> syntax over the Ruby <strong>hash</strong> syntax (“:” vs. “=&gt;”).
<ul>
<li>The Ruby 1.9 symbol hash syntax is an improvement, but not quite as good.</li>
</ul>
</li>
<li>Checking for string containment is nice: <strong>if substring in string</strong>.</li>
</ul>
<h1>Where Ruby Rocks</h1>
<ul>
<li>Consistency.</li>
<li>Blocks.</li>
<li>Excellent functional tools to deal with Enumerable.</li>
<li>Meta-programming.</li>
<li>Optional parentheses.</li>
<li>Modules and classes are also objects.</li>
</ul>
<p> </p>
</div><!-- .entry-content -->
<footer class="entry-footer">
<span class="byline"><span class="author vcard"><img alt="" class="avatar avatar-49 photo" height="49" src="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=49&amp;d=blank&amp;r=g" srcset="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=98&amp;d=blank&amp;r=g 2x" width="49"/><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/booch">Craig Buchek</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2013/02/22/my-thoughts-on-python-vs-ruby" rel="bookmark"><time class="entry-date published" datetime="2013-02-22T11:03:06+00:00">February 22, 2013</time><time class="updated" datetime="2013-05-10T15:20:58+00:00">May 10, 2013</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../../category/programming" rel="category tag">Programming</a>, <a href="../../../category/programming/programming-languages/python" rel="category tag">Python</a>, <a href="../../../category/programming/programming-languages/ruby" rel="category tag">Ruby</a></span><span class="comments-link"><a href="../../../2013/02/22/my-thoughts-on-python-vs-ruby#comments">1 Comment<span class="screen-reader-text"> on My Thoughts on Python vs. Ruby</span></a></span> </footer><!-- .entry-footer -->
</article><!-- #post-## -->
<article class="post-67 post type-post status-publish format-standard hentry category-programming category-ruby" id="post-67">
<header class="entry-header">
<h2 class="entry-title"><a href="../../../2012/01/11/grenade-debugging-pattern" rel="bookmark">Debugging Pattern – Grenade</a></h2> </header><!-- .entry-header -->
<div class="entry-content">
<p>I’ve been more interested in programming patterns lately, partly due to the Ruby community’s recent interest — especially the Ruby Rogue podcast’s love affair with “Smalltalk Best Practice Patterns”.</p>
<p>I consider most of the patterns in “Smalltalk Best Practice Patterns” to be patterns “in the small” — things that are typically employed on a single line or method. The Gang Of Four patterns are more medium sized, dealing with methods and classes. The PEAA book covers architectural-scale patterns. I suppose “The Pragmatic Programmer” and similar books could (should!) be considered to be very general patterns, mostly about the practice of programming.</p>
<p>One type of pattern that I have not seen discussed much is debugging patterns. I’m not exactly sure why that is; probably just our general concentration on designing the program code itself. There are definitely testing patterns. But I can’t think of anything that I’ve seen that covers debugging patterns. A quick search on the Internet doesn’t turn up too much.</p>
<p>Anyway, a co-worker (Helena) and I were debugging recently, and were having trouble figuring out where a certain method on a certain object was being called. We came up with a really cool solution. We immediately called it a grenade, because its entire purpose is to blow up (raise an exception) and display a backtrace to show us the caller of the method that we’re looking for.</p>
<p>Here’s our implementation in Ruby:</p>
<pre><code class="ruby">
module Grenade
  def method_under_investigation(*)
    raise "method_under_investigation called"
  end
end

class Xyz
  ...
  def xyz
    object_under_investigation.extend(Grenade)
  end
  ...
end</code></pre>
<p>I’m sure we could wrap that in some more semantic sugar, even going as far as making it look something like this:</p>
<pre><code class="ruby">
class Xyz
  ...
  def xyz
    object_under_investigation.blow_up_when_method_called(:method_under_investigation)
  end
  ...
end
</code></pre>
<p>I’m not sure that would really be worth it though, unless we were to add it to some sort of library.</p>
<p>So that’s our contribution to the (small) list of debugging patterns.</p>
</div><!-- .entry-content -->
<footer class="entry-footer">
<span class="byline"><span class="author vcard"><img alt="" class="avatar avatar-49 photo" height="49" src="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=49&amp;d=blank&amp;r=g" srcset="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=98&amp;d=blank&amp;r=g 2x" width="49"/><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/booch">Craig Buchek</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2012/01/11/grenade-debugging-pattern" rel="bookmark"><time class="entry-date published" datetime="2012-01-11T18:59:59+00:00">January 11, 2012</time><time class="updated" datetime="2016-02-24T15:44:06+00:00">February 24, 2016</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../../category/programming" rel="category tag">Programming</a>, <a href="../../../category/programming/programming-languages/ruby" rel="category tag">Ruby</a></span><span class="comments-link"><a href="../../../2012/01/11/grenade-debugging-pattern#respond">Leave a comment<span class="screen-reader-text"> on Debugging Pattern – Grenade</span></a></span> </footer><!-- .entry-footer -->
</article><!-- #post-## -->
<article class="post-63 post type-post status-publish format-standard hentry category-programming" id="post-63">
<header class="entry-header">
<h2 class="entry-title"><a href="../../../2012/01/10/write-comments-for-yourself-2" rel="bookmark">Write Comments For Yourself</a></h2> </header><!-- .entry-header -->
<div class="entry-content">
<p><a href="https://github.com/adkron">Amos</a> and I got in a heated discussion recently on whether we should write a single line comment to better explain some code. (The code in question was Amos’s very elegant solution to testing whether a job got sent to Resque.)</p>
<p>Amos doesn’t believe in writing comments much at all. He thinks that if you’re writing a comment, it means that you’re doing something wrong, and that you probably need to write the code more clearly.</p>
<p>I agree with that, to a point. First off, it’s not necessary to write perfect code. If you can change a class or method name to better describe what you’re doing (and more importantly, why you’re doing it) then you should definitely do so. But it’s not always worth refactoring until you get every “why” answered. More importantly, I don’t think it’s even possible to capture everything in the code that is worth capturing. For example, why did you choose this implementation, as opposed to another that might be more obvious or common?</p>
<p>After our argument, I came up with a good rule of thumb (or “pattern”):</p>
<blockquote><p>Write comments for your (future) self.<sup><a href="#footnote_1">1</a></sup></p></blockquote>
<p>In other words, if your comment will help you to understand the code more quickly when you look at it in the future, then it’s a valid comment. It also means that you can assume that the reader has about as much general programming knowledge as you currently do. (Your future self will have more general knowledge, but possibly less specific knowledge of the lines of code in question. And because of this, your current solution might not make as much sense in the future. You might know of a better solution in the future, but you’ll have to know all the constraints that you had when you originally wrote the code.)</p>
<p>This is not to say that you should not write comments in clear English, that others can understand. The comment is written for a future maintainer. That may be you (which is why the rule works well), or it may be someone else. The rule is more about when to write a comment, and what level of competence you should assume of the reader.</p>
<p id="footnote_1"><sup>1</sup> Perhaps it should be “Write comments TO your (future) self”.</p>
</div><!-- .entry-content -->
<footer class="entry-footer">
<span class="byline"><span class="author vcard"><img alt="" class="avatar avatar-49 photo" height="49" src="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=49&amp;d=blank&amp;r=g" srcset="http://2.gravatar.com/avatar/52bfd7cb9ac37808464919f9685ca62f?s=98&amp;d=blank&amp;r=g 2x" width="49"/><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/booch">Craig Buchek</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2012/01/10/write-comments-for-yourself-2" rel="bookmark"><time class="entry-date published" datetime="2012-01-10T19:02:12+00:00">January 10, 2012</time><time class="updated" datetime="2013-04-28T19:04:22+00:00">April 28, 2013</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../../category/programming" rel="category tag">Programming</a></span><span class="comments-link"><a href="../../../2012/01/10/write-comments-for-yourself-2#respond">Leave a comment<span class="screen-reader-text"> on Write Comments For Yourself</span></a></span> </footer><!-- .entry-footer -->
</article><!-- #post-## -->
<nav class="navigation pagination" role="navigation">
<h2 class="screen-reader-text">Posts navigation</h2>
<div class="nav-links"><a class="prev page-numbers" href="../../../category/programming/">Previous page</a>
<a class="page-numbers" href="../../../category/programming/"><span class="meta-nav screen-reader-text">Page </span>1</a>
<span class="page-numbers current"><span class="meta-nav screen-reader-text">Page </span>2</span></div>
</nav>
</main><!-- .site-main -->
</div><!-- .content-area -->
<aside class="sidebar widget-area" id="secondary" role="complementary">
<section class="widget widget_pages" id="pages-2"><h2 class="widget-title">Pages</h2> <ul>
<li class="page_item page-item-2"><a href="../../../about">About</a></li>
</ul>
</section><section class="widget widget_categories" id="categories-4"><h2 class="widget-title">Categories</h2> <ul>
<li class="cat-item cat-item-17"><a href="../../../category/agile">Agile</a>
</li>
<li class="cat-item cat-item-26"><a href="../../../category/programming/architecture">Architecture</a>
</li>
<li class="cat-item cat-item-20"><a href="../../../category/blogging">Blogging</a>
</li>
<li class="cat-item cat-item-25"><a href="../../../category/programming/programming-languages/brilliant">Brilliant</a>
</li>
<li class="cat-item cat-item-30"><a href="../../../category/agile/empathy">Empathy</a>
</li>
<li class="cat-item cat-item-27"><a href="../../../category/agile/estimation-agile">Estimation</a>
</li>
<li class="cat-item cat-item-22"><a href="../../../category/gadgets">Gadgets</a>
</li>
<li class="cat-item cat-item-7"><a href="../../../category/open-source/linux">GNU/Linux</a>
</li>
<li class="cat-item cat-item-9"><a href="../../../category/programming/programming-languages">Languages</a>
</li>
<li class="cat-item cat-item-19"><a href="../../../category/programming/oop">OOP</a>
</li>
<li class="cat-item cat-item-5"><a href="../../../category/open-source">Open Source</a>
</li>
<li class="cat-item cat-item-8 current-cat"><a href="../../../category/programming">Programming</a>
</li>
<li class="cat-item cat-item-16"><a href="../../../category/programming/programming-languages/python">Python</a>
</li>
<li class="cat-item cat-item-29"><a href="../../../category/resolutions">Resolutions</a>
</li>
<li class="cat-item cat-item-28"><a href="../../../category/agile/retrospectives">Retrospectives</a>
</li>
<li class="cat-item cat-item-10"><a href="../../../category/programming/programming-languages/ruby">Ruby</a>
</li>
<li class="cat-item cat-item-6"><a href="../../../category/webdev/rails">Ruby on Rails</a>
</li>
<li class="cat-item cat-item-12"><a href="../../../category/security">Security</a>
</li>
<li class="cat-item cat-item-21"><a href="../../../category/programming/programming-languages/shell">Shell</a>
</li>
<li class="cat-item cat-item-13"><a href="../../../category/sysadmin">System Admin</a>
</li>
<li class="cat-item cat-item-18"><a href="../../../category/agile/tdd">TDD</a>
</li>
<li class="cat-item cat-item-4"><a href="../../../category/webdev">Web Development</a>
</li>
</ul>
</section> </aside><!-- .sidebar .widget-area -->
</div><!-- .site-content -->
<footer class="site-footer" id="colophon" role="contentinfo">
<div class="site-info">
<span class="site-title"><a href="../../../" rel="home">BoochTek, LLC</a></span>
<a href="https://wordpress.org/">Proudly powered by WordPress</a>
</div><!-- .site-info -->
</footer><!-- .site-footer -->
</div><!-- .site-inner -->
</div><!-- .site -->
<script src="../../../../wp-content/themes/twentysixteen/js/skip-link-focus-fix.js?ver=20150825" type="text/javascript"></script>
<script type="text/javascript">
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script src="../../../../wp-content/themes/twentysixteen/js/functions.js?ver=20150825" type="text/javascript"></script>
<script src="../../../../wp-includes/js/wp-embed.min.js?ver=4.7.2" type="text/javascript"></script>
</body>
</html>
